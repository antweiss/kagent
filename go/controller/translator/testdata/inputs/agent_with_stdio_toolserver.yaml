operation: translateAgent
targetObject: agent
namespace: test
objects:
  - apiVersion: v1
    kind: Secret
    metadata:
      name: openai-secret
      namespace: test
    data:
      api-key: c2stdGVzdC1hcGkta2V5  # base64 encoded "sk-test-api-key"
  - apiVersion: v1
    kind: Secret
    metadata:
      name: math-secret
      namespace: test
    data:
      math: c2stdGVzdC1hcGkta2V5  # base64 encoded "sk-test-api-key"
  - apiVersion: kagent.dev/v1alpha1
    kind: ModelConfig
    metadata:
      name: nested-model
      namespace: test
    spec:
      provider: OpenAI
      model: gpt-4o
      apiKeySecretRef: openai-secret
      apiKeySecretKey: api-key
  - apiVersion: kagent.dev/v1alpha1
    kind: Agent
    metadata:
      name: agent
      namespace: test
    spec:
      description: A toolserver for math problems
      systemMessage: You are a math toolserver. Focus on solving mathematical problems step by step.
      modelConfig: nested-model
      tools:
        - type: MCPServer
          mcpServer:
            toolServer: toolserver
            toolNames:
              - math
  - apiVersion: kagent.dev/v1alpha1
    kind: ToolServer
    metadata:
      name: toolserver
      namespace: test
    spec:
      config:
        stdio:
          command: /app/python/bin/mcp-math
          args:
            - -t
            - stdio
            - debug
          readTimeoutSeconds: 30
          envFrom:
          - name: "MATH_URL"
            value: http://localhost:8080/mcp
          - name: "MATH_API_KEY"
            valueFrom:
              type: Secret
              key: "math"
              valueRef: math-secret
